## 前端架构 (以小程序为例)

本文就谈谈前端架构, 以小程序 (`基于 mpvue`) 为例子

### 有幸独立参与了一款小程序的开发, 即将是两款
> 都是基于 mpvue 开发, 毕竟本人比较精通 Vue, 而且本人也懒得再去学小程序那恶心的语法...

#### mpvue

简单粗暴的介绍一下 mpvue, 你可以直接看成是 **compiler** + **loader**, 借助 webpack 编译成适合小程序端的目录文件与语法。


### 前端架构

架构 听着就是那么装逼又高大上的词。  
每个人对架构的理解都不一样, 我就说说我个人的 前端架构 的理解, 以小程序端的设计为例。

说起前端架构, 总是逃不开一大堆设计:

1. 工程目录
一个好的工程目录, 对开发体验与效率上带来了很大的隐性增长, 作为曾经维护好多老工程的人 深有体会。
```src
├─ build/                  # 打包编译脚本
├─ config/                 # 打包编译相关配置
├─ node_modules/           # 不解释
├─ scripts/                # 应用相关脚本, 如 应用环境切换
├─ static/                 # 图片等静态资源
├─ src/                    # 前端工程
│   ├─── components/              # 组件文件夹
│   ├─── config/                  # 配置相关
│   │       ├─── mina/                   # 小程序接口封装
│   │       ├─── router/                 # 自定义路由栈 (当然你可以直接抽离成三方包)
│   │       ├─── adapter.js              # 适配器 (整合各平台接口, 未来用于多端复用)
│   │       ├─── app.js                  # 应用级别信息 (存储系统信息 以及 重要值)
│   │       ├─── env.json                # 环境文件 (ignore, scrips 文件夹里有切换环境脚本, 会根据命令自动 生成/修改 该文件)
│   │       ├─── host.js                 # 存放各种可用接口的 host
│   ├─── mixins/                  # vue mixin
│   ├─── pages/                   # 页面文件
│   ├─── routes/                  # 配置相关
│   │       ├─── build.js                # 路由暴露文件 (用于编译, 里面有一些 node 代码)
│   │       ├─── index.js                # 路由暴露文件 (应用引用)
│   │       ├─── routes.json             # 实际路由文件, 工程大了再拆分
│   ├─── service/                 # 存放 Api 接口相关调用服务
│   ├─── styles/                  # 样式目录
│   ├─── utils/                   # 常用方法工具包
│   ├─── vuex/                    # 不解释
│   ├─── App.vue                  # 入口 Vue 文件 (引入全局样式、分享反馈上报等)
│   ├─── main.js                  # 入口文件 (小程序背景相关配置、初始化插件等)
```
2. 代码风格/编程思想
    - ...
3. 通信机制/事件机制
    - ...
4. 路由设计
    - ...
5. 状态管理/应用环境管理
    - ...
6. 前端微服务/领域化设计
    - ...
7. 组件/模块设计
    - ...
8. 埋点/异常设计
    - ...
9. 跨端复用/平台兼容
    - ...
10. 持续集成/自动化测试
    - ...

未完待续......
